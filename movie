#!/usr/bin/env ruby

require_relative 'lib/parse_arguments'

command = ARGV[0]
options = ParseArguments.parse
options[:title] = ARGV[1]
error_messages = ParseArguments.validate(options)

if error_messages.empty?
  require "sqlite3"
  database = SQLite3::Database.new("db/movie_test.sqlite3")
  statement = "insert into cinephile_movies_test(title, seen, own, wishlist_see, wishlist_own, user_rating) values('#{options[:title]}', '#{options[:seen]}', '#{options[:own]}', '#{options[:wishlist_see]}', '#{options[:wishlist_own]}', '#{options[:rating]}')"
  database.execute(statement)
  puts expected = "A movie named #{options[:title]}, with seen? #{options[:seen]}, own? #{options[:own]}, wishlist see #{options[:wishlist_see]}, wishlist own #{options[:wishlist_own]}, rating #{options[:rating]}"
else
  puts error_messages
end